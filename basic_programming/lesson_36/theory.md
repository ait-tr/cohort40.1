# Lesson 36


Дженерики (Generics) в Java — это мощный механизм, позволяющий указывать типы в качестве параметров при определении классов, интерфейсов и методов. Они были введены в Java 5 для обеспечения строгой проверки типов во время компиляции и для устранения риска ошибок, связанных с приведением типов. Использование дженериков повышает читаемость и безопасность кода.

### Ключевые аспекты дженериков:

1. **Параметризация типами:**
    - Дженерики позволяют классам, интерфейсам и методам быть параметризированными типами. Например, `List<E>` — где `E` является типовым параметром, представляющим тип элементов списка.

2. **Типовая безопасность:**
    - Дженерики обеспечивают безопасность во время компиляции, проверяя правильность типов данных, что уменьшает риск ошибок во время выполнения.

3. **Избавление от приведения типов:**
    - С дженериками не требуется явное приведение типов. Компилятор знает точный тип, и ошибки можно обнаружить на этапе компиляции, а не во время выполнения.

### Примеры использования:

#### Классы и интерфейсы:

```java
class Box<T> {
    private T t; // T - типовой параметр

    public void set(T t) {
        this.t = t;
    }

    public T get() {
        return t;
    }
}

// Пример использования
Box<Integer> integerBox = new Box<>();
```

В этом примере `Box` — это обобщенный класс, где `T` — типовой параметр. Это позволяет `Box` работать с объектами любого типа.

#### Методы:

```java
public <T> void genericDisplay(T element) {
    System.out.println(element.getClass().getName() + " = " + element);
}

// Пример вызова метода
genericDisplay(10);
genericDisplay("Hello");
```

Здесь метод `genericDisplay` является обобщенным и может принимать параметры любого типа.

### Ограничения (Bounds) в дженериках:

- **Ограниченные типы (Bounded Type Parameters):** Можно ограничить типы, которые можно использовать в качестве типовых параметров.
    - Например, `<T extends Number>` означает, что T может быть только Number или его подклассом.

### Полезно знать:

- **Стирание типов (Type Erasure):** Дженерики в Java реализованы через механизм стирания типов. Это означает, что информация о типе стирается во время компиляции, и все обобщенные типы заменяются их границами или `Object` если границы не указаны.
- **Не могут быть примитивными типами:** Типовые параметры не могут быть примитивными типами, например, `int`, `long` и т.д. Используйте их обёртки, такие как `Integer`, `Long`.

Дженерики значительно улучшают безопасность и читаемость кода, позволяя разработчикам создавать более гибкие и универсальные компоненты.

PECS (Producer Extends, Consumer Super) — это мнемоника, используемая для облегчения понимания принципов использования ограничений при работе с обобщениями (generics) в Java, особенно в контексте правила "extends" и "super". Этот принцип особенно полезен при работе с коллекциями и обобщенными интерфейсами, такими как `List`, `Set` и `Map`.

### Разбор PECS:

#### 1. Producer Extends:
- **Producer:** Если вы используете обобщенный тип и предполагаете получать (читать) данные из него, то он является "Producer".
- **Extends:** В таких случаях используйте ключевое слово `extends` в вашем обобщенном ограничении. Это позволит вам читать из коллекции объекты данного типа и его подтипов.
- **Пример:** `List<? extends Number>` означает список объектов, которые являются `Number` или его подклассами (например, `Integer`, `Float`).

#### 2. Consumer Super:
- **Consumer:** Если вы используете обобщенный тип и предполагаете помещать (писать) данные в него, то он является "Consumer".
- **Super:** В таких случаях используйте ключевое слово `super` в вашем обобщенном ограничении. Это позволит вам вставлять в коллекцию объекты данного типа и его супертипов.
- **Пример:** `List<? super Integer>` означает список, в который можно добавлять `Integer` и объекты любых его суперклассов (например, `Number` или `Object`).

### Примеры использования PECS:

#### Пример с Producer (Extends):
```java
public static double sumOfList(List<? extends Number> list) {
    double s = 0.0;
    for (Number n : list)
        s += n.doubleValue();
    return s;
}
```
Здесь метод `sumOfList` может читать из списка чисел (`Number`) или любого его подкласса (например, `Integer`, `Double`).

#### Пример с Consumer (Super):
```java
public static void addNumbers(List<? super Integer> list) {
    for (int i = 1; i <= 10; i++) {
        list.add(i);
    }
}
```
В этом примере метод `addNumbers` может добавлять `Integer` в список объектов типа `Integer` или его суперклассов (например, `Number` или `Object`).

### Зачем это важно:
PECS помогает обеспечить безопасность типов при использовании обобщенных типов и упрощает понимание того, как и когда использовать `extends` и `super` в обобщенных ограничениях. Это улучшает гибкость и повторное использование кода, позволяя обобщенным методам и классам работать более широко с различными типами данных.


